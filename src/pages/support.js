import React from "react"
import { graphql } from "gatsby"
import styled from "styled-components"

import Layout from "../components/Layout"
import SupportIndex from "../components/SupportIndex"
import SupportContact from "../components/SupportContact"
import SupportArticleSearch from "../components/SupportArticleSearch"

import Plant from "../images/support/Plant.png"
import bg from "../images/support/bg1.png"

const Support = ({ data, pageContext, location }) => {
  const edges = data.prismicSupport.data.body
  console.log('data', edges)

  return (
    <Layout
      location={location}
      prismicLayout={data.prismicLayout}>
      <TopBanner>
        <Content>
          <h2><svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.7859 2.02814C28.5804 2.02814 36.5211 9.81381 36.5211 19.4185C36.5211 29.0226 28.5804 36.8089 18.7859 36.8089C8.99139 36.8089 1.05078 29.0226 1.05078 19.4185C1.05078 9.81381 8.99139 2.02814 18.7859 2.02814Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M19.2934 7.82492C25.1703 7.82492 29.9345 12.4966 29.9345 18.2591C29.9345 24.0212 25.1703 28.6934 19.2934 28.6934C13.4166 28.6934 8.65234 24.0212 8.65234 18.2591C8.65234 12.4966 13.4166 7.82492 19.2934 7.82492Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M8.051 22.3117L8.21979 23.2974H8.21979L8.051 22.3117ZM1.13547 23.496L1.30427 24.4817H1.30427L1.13547 23.496ZM1.11859 23.3975L1.28739 24.3831H1.28739L1.11859 23.3975ZM8.03412 22.2132L8.20291 23.1988H8.20291L8.03412 22.2132ZM1.05819 14.1475L1.22183 13.161L1.05819 14.1475ZM8.01273 15.301L8.17637 14.3145L8.17637 14.3145L8.01273 15.301ZM8.05387 15.3586L7.06735 15.1949L7.06735 15.1949L8.05387 15.3586ZM7.99637 15.3997L7.83273 16.3862L7.99637 15.3997ZM1.04183 14.2461L1.20546 13.2596L1.04183 14.2461ZM28.2853 22.2132L28.4541 21.2275L28.2853 22.2132ZM35.2014 23.3975L35.0326 24.3831L35.2014 23.3975ZM35.2423 23.4552L36.2279 23.624V23.624L35.2423 23.4552ZM35.1846 23.496L35.3533 22.5104H35.3533L35.1846 23.496ZM28.2684 22.3117L28.4372 21.3261L28.2684 22.3117ZM35.2292 14.2548L35.3928 15.2413H35.3928L35.2292 14.2548ZM35.2704 14.1973L34.2838 14.3608L34.2839 14.3608L35.2704 14.1973ZM28.2735 15.4078L28.11 14.4213H28.11L28.2735 15.4078ZM28.216 15.3666L27.2295 15.5302V15.5302L28.216 15.3666ZM28.2572 15.3091L28.0936 14.3226L28.2572 15.3091ZM35.2129 14.1562L35.0494 13.1696H35.0494L35.2129 14.1562ZM21.7209 28.669L20.7364 28.8443L21.7209 28.669ZM21.6629 28.6285L21.4877 27.644H21.4877L21.6629 28.6285ZM22.9376 35.5028L23.9221 35.3276V35.3276L22.9376 35.5028ZM22.8971 35.5608L22.7218 34.5763L22.7218 34.5763L22.8971 35.5608ZM22.8391 35.5204L21.8546 35.6956L22.8391 35.5204ZM21.6225 28.6865L20.638 28.8618L21.6225 28.6865ZM14.6974 28.6863L15.6828 28.8564L14.6974 28.6863ZM13.5121 35.5526L14.4975 35.7227V35.7227L13.5121 35.5526ZM13.4543 35.5933L13.2842 36.5788L13.2842 36.5788L13.4543 35.5933ZM13.4136 35.5356L14.399 35.7057L13.4136 35.5356ZM14.5989 28.6693L15.5843 28.8394L14.5989 28.6693ZM22.9366 2.11634L21.9521 1.94105L21.9521 1.94105L22.9366 2.11634ZM22.8962 2.05835L23.0715 1.07384V1.07384L22.8962 2.05835ZM21.7253 8.91946L20.7408 8.74416V8.74416L21.7253 8.91946ZM21.6673 8.95992L21.8426 7.97541L21.8426 7.9754L21.6673 8.95992ZM21.6269 8.90193L20.6424 8.72663V8.72664L21.6269 8.90193ZM22.8382 2.09882L23.8227 2.27411V2.27411L22.8382 2.09882ZM13.4775 2.01948L14.4623 1.84592V1.84592L13.4775 2.01948ZM13.4196 1.97892L13.246 0.994093V0.994093L13.4196 1.97892ZM14.6894 8.89621L15.6742 8.72266V8.72266L14.6894 8.89621ZM14.6488 8.95413L14.4753 7.96931L14.4753 7.96931L14.6488 8.95413ZM14.5909 8.91357L13.6061 9.08713V9.08713L14.5909 8.91357ZM13.379 2.03684L12.3942 2.21039V2.21039L13.379 2.03684ZM8.21979 23.2974C8.79138 23.1995 9.17537 22.6568 9.07749 22.0852L7.10619 22.4228C7.01763 21.9057 7.36505 21.4146 7.8822 21.3261L8.21979 23.2974ZM1.30427 24.4817L8.21979 23.2974L7.8822 21.3261L0.966681 22.5104L1.30427 24.4817ZM0.0921001 23.624C0.189983 24.1956 0.732689 24.5796 1.30427 24.4817L0.966681 22.5104C1.48382 22.4218 1.97484 22.7692 2.0634 23.2864L0.0921001 23.624ZM0.949802 22.4118C0.378223 22.5097 -0.00578296 23.0524 0.0921001 23.624L2.0634 23.2864C2.15196 23.8035 1.80453 24.2945 1.28739 24.3831L0.949802 22.4118ZM7.86532 21.2275L0.949801 22.4118L1.28739 24.3831L8.20291 23.1988L7.86532 21.2275ZM9.07749 22.0852C8.97961 21.5136 8.4369 21.1296 7.86532 21.2275L8.20291 23.1988C7.68577 23.2874 7.19475 22.94 7.10619 22.4228L9.07749 22.0852ZM1.22183 13.161C0.649743 13.0661 0.109053 13.4529 0.0141609 14.025L1.9872 14.3523C1.90135 14.8699 1.41215 15.2199 0.894554 15.134L1.22183 13.161ZM8.17637 14.3145L1.22183 13.161L0.894554 15.134L7.84909 16.2876L8.17637 14.3145ZM9.04039 15.5222C9.13529 14.9501 8.74844 14.4094 8.17637 14.3145L7.84909 16.2876C7.3315 16.2017 6.98149 15.7125 7.06735 15.1949L9.04039 15.5222ZM7.83273 16.3862C8.40481 16.4811 8.94551 16.0943 9.0404 15.5222L7.06735 15.1949C7.1532 14.6773 7.64241 14.3273 8.16 14.4132L7.83273 16.3862ZM0.87819 15.2327L7.83273 16.3862L8.16 14.4132L1.20546 13.2596L0.87819 15.2327ZM0.0141609 14.025C-0.0807314 14.5971 0.306108 15.1378 0.87819 15.2327L1.20546 13.2596C1.72306 13.3455 2.07306 13.8347 1.9872 14.3523L0.0141609 14.025ZM28.4541 21.2275C27.8825 21.1296 27.3398 21.5137 27.2419 22.0852L29.2132 22.4228C29.1247 22.9399 28.6337 23.2874 28.1165 23.1988L28.4541 21.2275ZM35.3702 22.4118L28.4541 21.2275L28.1165 23.1988L35.0326 24.3831L35.3702 22.4118ZM36.2279 23.624C36.3258 23.0524 35.9418 22.5097 35.3702 22.4118L35.0326 24.3831C34.5155 24.2946 34.1681 23.8035 34.2566 23.2864L36.2279 23.624ZM35.0158 24.4817C35.5874 24.5796 36.13 24.1955 36.2279 23.624L34.2566 23.2864C34.3452 22.7693 34.8362 22.4218 35.3533 22.5104L35.0158 24.4817ZM28.0997 23.2974L35.0158 24.4817L35.3533 22.5104L28.4372 21.3261L28.0997 23.2974ZM27.2419 22.0852C27.1441 22.6568 27.5281 23.1995 28.0997 23.2974L28.4372 21.3261C28.9544 21.4146 29.3018 21.9057 29.2132 22.4228L27.2419 22.0852ZM35.3928 15.2413C35.9649 15.1465 36.3518 14.6059 36.2569 14.0338L34.2839 14.3608C34.198 13.8432 34.5481 13.3541 35.0657 13.2683L35.3928 15.2413ZM28.437 16.3943L35.3928 15.2413L35.0657 13.2683L28.11 14.4213L28.437 16.3943ZM27.2295 15.5302C27.3243 16.1023 27.865 16.4892 28.437 16.3943L28.11 14.4213C28.6276 14.3355 29.1168 14.6855 29.2026 15.2031L27.2295 15.5302ZM28.0936 14.3226C27.5215 14.4174 27.1346 14.9581 27.2295 15.5302L29.2026 15.2031C29.2883 15.7207 28.9383 16.2099 28.4207 16.2957L28.0936 14.3226ZM35.0494 13.1696L28.0936 14.3226L28.4207 16.2957L35.3764 15.1427L35.0494 13.1696ZM36.2569 14.0338C36.1621 13.4617 35.6215 13.0748 35.0494 13.1696L35.3764 15.1427C34.8588 15.2285 34.3696 14.8784 34.2838 14.3608L36.2569 14.0338ZM22.7055 28.4937C22.6038 27.9228 22.0586 27.5424 21.4877 27.644L21.8382 29.6131C21.3217 29.705 20.8284 29.3608 20.7364 28.8443L22.7055 28.4937ZM23.9221 35.3276L22.7055 28.4937L20.7364 28.8443L21.953 35.6781L23.9221 35.3276ZM23.0724 36.5454C23.6433 36.4437 24.0237 35.8985 23.9221 35.3276L21.953 35.6781C21.8611 35.1616 22.2053 34.6683 22.7218 34.5763L23.0724 36.5454ZM21.8546 35.6956C21.9562 36.2666 22.5015 36.647 23.0724 36.5453L22.7218 34.5763C23.2384 34.4843 23.7317 34.8286 23.8236 35.3451L21.8546 35.6956ZM20.638 28.8618L21.8546 35.6956L23.8236 35.3451L22.607 28.5113L20.638 28.8618ZM21.4877 27.644C20.9168 27.7457 20.5363 28.2909 20.638 28.8618L22.607 28.5113C22.699 29.0278 22.3548 29.5211 21.8382 29.6131L21.4877 27.644ZM15.6828 28.8564C15.7815 28.2849 15.3982 27.7417 14.8268 27.6431L14.4865 29.6139C13.9695 29.5247 13.6227 29.0332 13.712 28.5162L15.6828 28.8564ZM14.4975 35.7227L15.6828 28.8564L13.712 28.5162L12.5267 35.3825L14.4975 35.7227ZM13.2842 36.5788C13.8557 36.6774 14.3989 36.2941 14.4975 35.7227L12.5267 35.3825C12.6159 34.8654 13.1074 34.5187 13.6244 34.6079L13.2842 36.5788ZM12.4282 35.3655C12.3295 35.9369 12.7128 36.4801 13.2842 36.5788L13.6245 34.6079C14.1415 34.6972 14.4883 35.1886 14.399 35.7057L12.4282 35.3655ZM13.6135 28.4992L12.4282 35.3655L14.399 35.7057L15.5843 28.8394L13.6135 28.4992ZM14.8268 27.6431C14.2553 27.5444 13.7121 27.9277 13.6135 28.4992L15.5843 28.8394C15.4951 29.3564 15.0036 29.7032 14.4865 29.6139L14.8268 27.6431ZM23.9212 2.29164C24.0228 1.72072 23.6424 1.17549 23.0715 1.07384L22.7209 3.04287C22.2043 2.9509 21.8602 2.4576 21.9521 1.94105L23.9212 2.29164ZM22.7098 9.09475L23.9212 2.29164L21.9521 1.94105L20.7408 8.74416L22.7098 9.09475ZM21.492 9.94443C22.063 10.0461 22.6082 9.66567 22.7098 9.09475L20.7408 8.74416C20.8328 8.22762 21.3261 7.88343 21.8426 7.97541L21.492 9.94443ZM20.6424 8.72664C20.5407 9.29755 20.9211 9.84279 21.4921 9.94444L21.8426 7.9754C22.3592 8.06737 22.7034 8.56068 22.6114 9.07722L20.6424 8.72664ZM21.8537 1.92352L20.6424 8.72663L22.6114 9.07722L23.8227 2.27411L21.8537 1.92352ZM23.0715 1.07384C22.5006 0.972185 21.9553 1.3526 21.8537 1.92352L23.8227 2.27411C23.7307 2.79066 23.2374 3.13484 22.7209 3.04287L23.0715 1.07384ZM14.4623 1.84592C14.3617 1.27482 13.8171 0.893447 13.246 0.994093L13.5931 2.96374C13.0764 3.0548 12.5837 2.70975 12.4927 2.19304L14.4623 1.84592ZM15.6742 8.72266L14.4623 1.84592L12.4927 2.19304L13.7046 9.06977L15.6742 8.72266ZM14.8224 9.93896C15.3935 9.83831 15.7749 9.29376 15.6742 8.72266L13.7046 9.06977C13.6135 8.55306 13.9586 8.06037 14.4753 7.96931L14.8224 9.93896ZM13.6061 9.08713C13.7067 9.65823 14.2513 10.0396 14.8224 9.93896L14.4753 7.96931C14.992 7.87825 15.4847 8.2233 15.5757 8.74001L13.6061 9.08713ZM12.3942 2.21039L13.6061 9.08713L15.5757 8.74001L14.3638 1.86328L12.3942 2.21039ZM13.246 0.994093C12.6749 1.09474 12.2935 1.63929 12.3942 2.21039L14.3638 1.86328C14.4549 2.37999 14.1098 2.87268 13.5931 2.96374L13.246 0.994093Z" fill="white" />
          </svg>
            Knowledgebase</h2>
            <FormBox>
            <SupportArticleSearch/>
            </FormBox>
          <Image>
            <img src={Plant} alt="" />
          </Image>
        </Content>
      </TopBanner>
      <Buttons>
        {edges && edges.map((item, index) => <a key={item.id} href="#">{item.primary.title.text}</a>)}
      </Buttons>
      {edges.map((item, index) => {
        return <SupportIndex key={item.id} data={item} />
      })}
      <SupportContact />
    </Layout>
  );
};

export default Support

export const query = graphql`
query SupportPageQuery{  
    ...PrismicLayout
  prismicSupport {
    ...SupportPage
  }
}
`

const TopBanner = styled.div`
display:flex;
padding:80px 0 0 0;
position:relative;
justify-content:center;
background-image:url(${bg});
background-position:bottom -1px left;
background-repeat:no-repeat;
background-size: 100%;
background-color: #1AA38E;
text-align:center;
@media only screen and (max-width:768px) {
  padding:50px 0 0;
}
h2{
  font-size: 45px;
  line-height: 47px;
  letter-spacing: -0.9px;
  justify-content: center;
  color:#fff;
  font-weight:700;
  margin:0 0 40px 0;
  display: flex;
  align-items: center;
  svg{
    margin-right:10px;
    width:35px;
    height:35px;
  }
  @media only screen and (max-width:480px) {
    flex-direction:column;
    font-size:35px;
  }
}
`;
const Content = styled.div`
max-width:540px;
margin:0 auto;
width:100%;
padding:0 15px;
@media only screen and (max-width:768px) {
  max-width:100%;
}
`;
const Image = styled.div`
position: absolute;
right: 100px;
bottom:-32px;
@media only screen and (max-width:950px) {
  position:inherit;
}
`;
const FormBox = styled.div`
display:flex;
justify-content: center;
border-radius:7px;
background-color:#fff;
margin:0 auto;
width:415px;
margin-bottom:100px;

@media only screen and (max-width:950px) {
  margin-bottom:10px;
}
@media only screen and (max-width:479px) {
  width:100%;
}
input[type=text] {
  float: none;
  border:0;
  border-radius:7px;
  display: block;
  text-align: left;
  width:100%;
  height:52px;
  font-size: 16px;
  margin: 0;
  padding: 14px;
  color: #4A4A4A;
  font-family: Open Sans;
  font-weight: 300;
  opacity: 0.8;
}
`;
const Buttons = styled.div`
display:flex;
justify-content: center;
padding:30px 0 40px 0;
box-shadow: 0px 1px 3px #ddd;
margin-bottom:50px;
@media only screen and (max-width:400px) {
  flex-direction:column;
}
a{
  background-color: #EDEDED;
  border-radius: 22px;
  text-decoration:none;
  font-size: 14px;
  text-align:center;
  line-height: 16px;
  font-weight: 700;
  color:#4a4a4a;
  padding:12px 20px;
  margin:0 8px;
  box-shadow: 0px 5px 8px #c1c1c1;
  @media only screen and (max-width:400px) {
    margin-bottom:10px;
  }
  &:hover,
  &:active {
    background-color:#25C1A9;
    color:#fff;
  }
}
`;
